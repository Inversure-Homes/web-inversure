<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inversure Â· Simulador</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    label { display:block; margin-top:10px; font-weight: bold; }
    input { width: 320px; padding: 6px; }
    button { margin-top: 18px; padding: 10px 14px; cursor:pointer; }
    .box { margin-top: 22px; padding: 12px; border: 1px solid #ddd; }
    pre { white-space: pre-wrap; }
  </style>
</head>
<body>

  <h1>Inversure Â· Simulador de operaciones</h1>

  <form method="post">
    {% csrf_token %}

    <h2>Datos principales</h2>
    <label>Precio compra</label>
    <input type="number" step="0.01" name="precio_compra" required>

    <label>Precio venta</label>
    <input type="number" step="0.01" name="precio_venta" required>

    <label>Meses operaciÃ³n</label>
    <input type="number" step="1" name="meses" required>

    <h2>Gastos (ejemplo)</h2>
    <label>GestorÃ­a compra</label>
    <input type="number" step="0.01" name="gestoria_compra">

    <label>Reforma</label>
    <input type="number" step="0.01" name="reforma">

    <label>PlusvalÃ­a municipal</label>
    <input type="number" step="0.01" name="plusvalia">

    <button type="submit">Calcular operaciÃ³n</button>
  </form>

  {% if resultado %}
    <div class="box">
      <h2>ðŸ“Š Resultados econÃ³micos</h2>
      <p><strong>InversiÃ³n total:</strong> {{ resultado.inversion_total }} â‚¬</p>
      <p><strong>Beneficio bruto:</strong> {{ resultado.beneficio_bruto }} â‚¬</p>
      <p><strong>Rentabilidad total:</strong> {{ resultado.rentabilidad }} %</p>
      <p><strong>Rentabilidad anualizada:</strong> {{ resultado.rentabilidad_anual }} %</p>
    </div>
  {% endif %}

  <div class="box">
    <h2>ðŸ§ª DEBUG (temporal)</h2>
    <p><strong>MÃ©todo:</strong> {{ debug.method }}</p>
    <p><strong>POST keys:</strong> {{ debug.post_keys }}</p>
    <p><strong>POST dict:</strong></p>
    <pre>{{ debug.post_dict }}</pre>
    <p><strong>Resultado (raw):</strong></p>
    <pre>{{ debug.resultado }}</pre>
  </div>

</body>
</html>
