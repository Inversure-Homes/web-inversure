{% extends "core/base.html" %}

{% block page_header %}
  <h1 class="mb-2">Dashboard</h1>
  <p class="text-muted">Resumen global de inversión, operaciones y resultados.</p>
{% endblock %}

{% block content %}
  <div class="card shadow-sm border-0">
    <div class="card-body">
      <div class="dashboard-metrics">
        <div class="metric">
          <span>Inversores activos</span>
          <strong>{{ dashboard_stats.inversores_activos }}</strong>
        </div>
        <div class="metric">
          <span>Capital invertido</span>
          <strong>{{ dashboard_stats_fmt.capital_actual }}</strong>
        </div>
        <div class="metric">
          <span>Capital acumulado</span>
          <strong>{{ dashboard_stats_fmt.capital_acumulado }}</strong>
        </div>
        <div class="metric">
          <span>Operaciones</span>
          <strong>{{ dashboard_stats.operaciones }}</strong>
        </div>
        <div class="metric">
          <span>Beneficio generado</span>
          <strong>{{ dashboard_stats_fmt.beneficio_total }}</strong>
        </div>
        <div class="metric">
          <span>Beneficio medio</span>
          <strong>{{ dashboard_stats_fmt.beneficio_medio }}</strong>
        </div>
      </div>

      <div class="dashboard-chart">
        {% for item in beneficios_chart %}
          <div class="chart-row">
            <span class="chart-label">{{ item.nombre }}</span>
            <div class="chart-bar">
              <span style="width: {{ item.pct|floatformat:0 }}%;"></span>
            </div>
            <span class="chart-value">{{ item.valor_fmt }}</span>
          </div>
        {% empty %}
          <div class="text-muted">Sin datos de beneficios todavía.</div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}
